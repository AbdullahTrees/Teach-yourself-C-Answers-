#include <stdio.h>
#include <ctype.h>

int main(int argc, char *argv[])
{
	int letters[27] = {0};
	FILE *reader_head;
	char ch;

	printf("Program that counts how many times a letter is present in a file.\n");

	if (argc != 2)
	{
		printf("Usage: 9_2-EX2.exe <filename>");
		return 1;
	}

	reader_head = fopen(argv[1], "r");
	if (reader_head == NULL)
	{
		printf("Error reading file: Are you sure the file exists?");
		return 255;
	}

	while((ch = fgetc(reader_head)) != EOF)
	{
		ch = toupper(ch); // set all letter characters to same values so the same offset can be applied

		if(ch >= 'A' && ch <= 'Z') // Letters only from here on out
		{
			/* 'A' has value 65, hence in the letters[] array, it should increment the 0th index as its the first letter
				hence the offset is 65.
				The letters[] array will keep track of presence of all letters alphabetically, such that
				letters[0] == number of times of a/A
				letters[1] == number of times of b/B
				...
				letters[25] == number of times of z/Z
			*/

			letters[ch - 65]++;
		}
		else
		{
			// letters[26] will store occurences of all other types of characters
			if (ch != '\n' && ch != '\0' && ch != '\r')
				letters[26]++;
		}
	}
	fclose(reader_head);

	// results are in, let's print them nicely
	printf("Here's the number of times each character popped up... \n");
	for (ch = 0; ch < 27; ch++)
	{
		printf("%c: %d\t", ch + 65, letters[ch]);
	}

	return 0;
}
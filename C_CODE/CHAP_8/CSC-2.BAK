#include <stdio.h>
#include <string.h>

#define MAX_NO_BOOKS 25

int main(void)
{
	int i;
	char book_data[MAX_NO_BOOKS][3][120] = 
	{
		"Teach Yourself C", "Herbert Schildt", "Osborne",
		"Kensuke's Kingdom", "Michael Morpurgo", "Unknown",
		"The Silver Sword", "Ian Serailler", "Oxford",
		"Nutella", "Wait... this is not a book", "Nutella Inc.", 
		"The Authentic Creed", "Sheikh Abdul-Aziz bin Abdullah bin Baz", "Ministry of Islamic Affairs",
		"The Chamber", "John Grisham", "Island Books",
		"", "", ""
	};


	beginning:
	printf("\nCard Catalog\n\t1. Enter\n\t2. Search by Author\n\t3. Search by Title\n\t4. Quit\nChoose your selection: ");

	switch(getche())
	{
		case '1': // Enter
		{
			printf("\n\nEnter name, author and publisher of the books. Enter a blank book name to stop.");
			
			for(i = 0; i < MAX_NO_BOOKS; i++)
			{
				printf("\nEnter name of book #%d: ", i+1);
				gets(book_data[i][0]);
				if (book_data[i][0][0] == '\0')
					break; // pls test whether this works or not... 'blank' is quite vague
				printf("Enter name of author of this book: ");
				gets(book_data[i][1]);
				printf("Enter the name of publisher of this book: ");
				gets(book_data[i][2]);
			}
			
			printf("Data received. At this point this data would be stored into a file but I don't know how to do that yet hahahaha.... Bye for now!");
		}
		break;

		case '2': // Search by Author
		{
			int match_found = 0;
			char authorname[120];
			
			printf("Please enter the name of the author: ");
			gets(authorname);
			
			for(i = 0; i < MAX_NO_BOOKS; i++)
			{
				if (strcmp(authorname, book_data[i][1]) == 0)
				{
					match_found = 1;
					printf("\nMatch found!\nBook name: %s\nBook author: %s\nBook Publisher: %s", book_data[i][0], book_data[i][1], book_data[i][2]);
					break;
				}
			}
			
			if (!match_found)
				printf("Match not found... Did you spell the name of the author correctly? If so, then this book is not present in the catalog.");
		}
		break;

		case '3': // Search by Title
		{
			int match_found = 0;
			char bookname[120];
			
			printf("Please enter the name of the book: ");
			gets(bookname);
			
			for(i = 0; i < MAX_NO_BOOKS; i++)
			{
				if (strcmp(bookname, book_data[i][0]) == 0)
				{
					match_found = 1;
					printf("\nMatch found!\nBook name: %s\nBook author: %s\nBook Publisher: %s", book_data[i][0], book_data[i][1], book_data[i][2]);
					break;
				}
			}
			
			if (!match_found)
				printf("Match not found... Did you spell the name of the book correctly? If so, then this book is not present in the catalog.");
		}
		break;

		case '4': // Quit
			return 0;

		default:
			goto beginning;
	}
	
	return 4;
}